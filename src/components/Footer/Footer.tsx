import { useEffect, useState } from "react";
import Button from "../Button/Button";
import styles from "./Footer.module.scss";
import SpotifyCard from "../SpotifyCard/SpotifyCard";

const Footer = () => {
  const [time, setTime] = useState("");
  const [buttonText, setButtonText] = useState("Click here to copy");

  useEffect(() => {
    // Only runs on client-side
    const updateTime = () => {
      setTime(
        new Date().toLocaleString("en-US", {
          timeZone: "Europe/Lisbon",
          hour: "2-digit",
          minute: "2-digit",
          second: "2-digit",
          hour12: true,
        })
      );
    };

    updateTime();
    const interval = setInterval(updateTime, 1000);
    return () => clearInterval(interval);
  }, []);

  const goToSocial = (url: string) => {
    window.open(url, "_blank");
  };

  const clickToCopyEmail = () => {
    const email = "adisamicheal20@gmail.com";

    navigator.clipboard.writeText(email).then(() => {
      setButtonText("copied");
      setTimeout(() => {
        setButtonText("Click here to copy");
      }, 2000);
    });
  };

  return (
    <footer className={styles.footer}>
      <div className={styles.footer__collaborate}>
        <div className={styles.footer__collaborate__wrapper}>
          <a
            href="mailto:adisamicheal20@gmail.com"
            className={styles.footer__collaborate__text}
          >
            Talk to me â€” Let&apos;s Collaborate
          </a>
        </div>
        <div className={styles.footer__collaborate__email}>
          <Button
            className={styles.footer__collaborate__email__button}
            onClick={clickToCopyEmail}
          >
            {buttonText}
          </Button>
          <p>adisamicheal20@gmail.com</p>
        </div>
      </div>
      <div className={styles.footer__footnote}>
        <div>
          <p>
            LISBON, PORTUGAL <span>{time || "Loading..."}</span>
          </p>
          <div className={styles.footer__footnote__music}>
            <SpotifyCard />
          </div>
        </div>
        <div className={styles.footer__footnote__social}>
          <Button
            className={styles.footer__button}
            onClick={() => goToSocial("https://github.com/adisamicheal")}
          >
            Github
          </Button>
          <Button
            className={styles.footer__button}
            onClick={() =>
              goToSocial("https://www.linkedin.com/in/micheal-adisa-5b5250170/")
            }
          >
            Linkedin
          </Button>
          <Button
            className={styles.footer__button}
            onClick={() => goToSocial("https://x.com/michellead")}
          >
            Twitter
          </Button>
        </div>
      </div>
      <svg
        className={styles.footer__svg}
        width={1686}
        viewBox="0 0 1686 91"
        fill="none"
        xmlns="http://www.w3.org/2000/svg"
      >
        <path
          fillRule="evenodd"
          clipRule="evenodd"
          d="M338.584 103H293.468C293.059 100.461 292.855 97.842 292.855 95.1428C292.855 84.4734 296.001 75.1151 302.293 67.0679C308.655 58.9754 317.679 52.6688 329.365 48.1478C341.051 43.5817 354.95 41.2986 371.062 41.2986C384.96 41.2986 397.13 42.9488 407.572 46.249C418.013 49.5493 426.277 54.1833 432.362 60.1509C438.447 66.1185 441.8 73.1259 442.423 81.1732H400.726C399.551 75.9741 396.439 71.7923 391.391 68.6276C386.412 65.4178 379.878 63.8128 371.788 63.8128C364.942 63.8128 358.961 65.0335 353.844 67.4748C348.796 69.8709 344.854 73.3746 342.019 77.9859C339.184 82.5973 337.767 88.1806 337.767 94.7359C337.767 97.6867 338.039 100.441 338.584 103ZM491.532 103H447.346V7.93422H490.288V61.0325H492.155C495.75 54.884 501.559 50.0692 509.58 46.5881C517.601 43.0618 527.662 41.2986 539.763 41.2986C550.827 41.2986 560.473 42.881 568.702 46.0456C577 49.165 583.431 53.6634 587.994 59.5406C592.627 65.3725 594.909 72.3574 594.84 80.495V103H550.654V85.6489C550.723 79.2292 548.234 74.2336 543.186 70.662C538.207 67.0905 531.223 65.3047 522.234 65.3047C516.218 65.3047 510.894 66.1411 506.261 67.8138C501.697 69.4866 498.101 71.9279 495.474 75.1377C492.915 78.3024 491.601 82.1226 491.532 86.5983V103ZM947.695 103H903.509V7.93422H947.695V103ZM1174.61 103H1016.41L1066.61 7.93422H1124.48L1174.61 103ZM1341.03 103V7.93422H1296.95V60.1509H1295.6C1293.66 57.3479 1290.83 54.4997 1287.09 51.6063C1283.43 48.6677 1278.59 46.2264 1272.57 44.2824C1266.62 42.2932 1259.19 41.2986 1250.27 41.2986C1238.58 41.2986 1227.83 43.2878 1218.01 47.2663C1208.26 51.1995 1200.45 57.1445 1194.57 65.1013C1188.69 73.0129 1185.76 82.9363 1185.76 94.8716C1185.76 97.6872 1185.92 100.397 1186.25 103H1231.76C1231.17 100.408 1230.87 97.6531 1230.87 94.7359C1230.87 88.7231 1232.15 83.4336 1234.71 78.8675C1237.27 74.3014 1241.04 70.7298 1246.02 68.1529C1251 65.576 1257.12 64.2875 1264.38 64.2875C1271.5 64.2875 1277.55 65.5308 1282.53 68.0173C1287.51 70.5038 1291.31 74.0301 1293.94 78.5962C1296.57 83.1624 1297.88 88.5423 1297.88 94.7359C1297.88 97.6679 1297.58 100.423 1296.97 103H1341.03ZM1398.18 103H1353.99V42.6549H1398.18V103ZM73.9667 103L45.3268 56.082H43.5635V103H0V7.93422H55.3879L113.887 101.246H116.377L174.876 7.93422H230.264V103H186.701V56.4211H184.937L156.397 103H73.9667ZM243.071 103V42.6549H287.257V103H243.071ZM1686 103V76.5618C1686 70.3682 1684.17 65.0561 1680.5 60.6256C1676.84 56.1499 1671.82 52.4879 1665.46 49.6397C1659.17 46.7916 1651.94 44.6893 1643.78 43.333C1635.69 41.9768 1627.22 41.2986 1618.37 41.2986C1605.65 41.2986 1594.45 42.5645 1584.77 45.0962C1575.16 47.5827 1567.31 51.1542 1561.22 55.8108C1555.14 60.4221 1551.06 65.8924 1548.98 72.2217L1589.85 74.3918C1591.37 70.9559 1594.48 68.1077 1599.18 65.8472C1603.89 63.5416 1610.21 62.3887 1618.17 62.3887C1625.7 62.3887 1631.51 63.5642 1635.59 65.9151C1639.74 68.2659 1641.81 71.5888 1641.81 75.8837V76.2906C1641.81 78.5058 1640.53 80.1786 1637.98 81.3088C1635.42 82.439 1631.3 83.298 1625.63 83.8857C1619.96 84.4282 1612.5 85.016 1603.23 85.6489C1595.35 86.1462 1587.81 87.0052 1580.62 88.2258C1573.5 89.4465 1567.13 91.2548 1561.53 93.6509C1556 96.0175 1551.62 99.1339 1548.38 103H1613.71C1615.51 102.833 1617.45 102.655 1619.51 102.467C1622.49 102.15 1625.46 101.811 1628.43 101.45C1631.41 101.043 1634.07 100.613 1636.42 100.161C1638.84 99.6637 1640.74 99.1212 1642.13 98.5335V103H1686ZM1542.6 103H1450.02C1436.18 100.911 1425.74 97.5461 1418.71 92.905C1411.17 87.8867 1407.4 81.4896 1407.4 73.7136C1407.4 67.0227 1410.17 61.2585 1415.7 56.4211C1421.3 51.5837 1429.15 47.854 1439.25 45.2318C1449.41 42.6097 1461.31 41.2986 1474.93 41.2986C1495.05 41.2986 1510.88 44.079 1522.43 49.6397C1534.05 55.2005 1540.83 62.773 1542.76 72.3574L1502.31 73.9849C1501.62 71.7244 1500.13 69.69 1497.85 67.8817C1495.57 66.0281 1492.56 64.5588 1488.83 63.4738C1485.16 62.3435 1480.77 61.7784 1475.65 61.7784C1468.81 61.7784 1463.03 62.7278 1458.33 64.6266C1453.63 66.4802 1451.28 68.9667 1451.28 72.0861C1451.28 74.5726 1452.8 76.6749 1455.84 78.3928C1458.89 80.1108 1464.11 81.4896 1471.5 82.5294L1500.34 86.327C1515.83 88.4066 1527.38 91.7521 1534.98 96.3635C1538.2 98.3162 1540.74 100.528 1542.6 103ZM892.596 103H848.721V98.5335C847.338 99.1212 845.436 99.6637 843.016 100.161C840.665 100.613 838.003 101.043 835.029 101.45C832.056 101.811 829.083 102.15 826.109 102.467C824.041 102.655 822.106 102.833 820.306 103H754.972C758.211 99.1339 762.596 96.0175 768.128 93.6509C773.729 91.2548 780.091 89.4465 787.213 88.2258C794.405 87.0052 801.942 86.1462 809.825 85.6489C819.091 85.016 826.559 84.4282 832.229 83.8857C837.899 83.298 842.013 82.439 844.572 81.3088C847.13 80.1786 848.41 78.5058 848.41 76.2906V75.8837C848.41 71.5888 846.335 68.2659 842.186 65.9151C838.107 63.5642 832.298 62.3887 824.761 62.3887C816.809 62.3887 810.482 63.5416 805.78 65.8472C801.078 68.1077 797.966 70.9559 796.445 74.3918L755.578 72.2217C757.652 65.8924 761.732 60.4221 767.817 55.8108C773.902 51.1542 781.751 47.5827 791.362 45.0962C801.043 42.5645 812.245 41.2986 824.968 41.2986C833.819 41.2986 842.29 41.9768 850.38 43.333C858.54 44.6893 865.766 46.7916 872.058 49.6397C878.42 52.4879 883.433 56.1499 887.098 60.6256C890.763 65.0561 892.596 70.3682 892.596 76.5618V103ZM643.495 103H600.385C600.005 100.491 599.816 97.8948 599.816 95.2106C599.816 84.496 602.996 75.0925 609.358 67.0001C615.72 58.9076 624.674 52.6009 636.222 48.08C647.839 43.5591 661.461 41.2986 677.089 41.2986C687.6 41.2986 697.384 42.4063 706.442 44.6215C715.57 46.7916 723.522 50.0692 730.299 54.4545C737.144 58.8398 742.469 64.3553 746.272 71.0011C750.075 77.6016 751.977 85.3324 751.977 94.1934V102.128H643.483V102.195C643.483 102.466 643.487 102.734 643.495 103ZM248.361 24.9555C253.063 27.8037 258.698 29.2278 265.268 29.2278C271.837 29.2278 277.438 27.8037 282.071 24.9555C286.773 22.0621 289.124 18.6036 289.124 14.58C289.124 10.6016 286.773 7.18827 282.071 4.34009C277.438 1.4467 271.837 0 265.268 0C258.698 0 253.063 1.4467 248.361 4.34009C243.728 7.18827 241.411 10.6016 241.411 14.58C241.411 18.6036 243.728 22.0621 248.361 24.9555ZM647.943 73.9849C645.264 77.0712 643.791 80.4845 643.524 84.2248H710.384C710.384 80.0655 709.001 76.381 706.235 73.1711C703.469 69.9613 699.631 67.4522 694.722 65.6438C689.881 63.7902 684.246 62.8634 677.815 62.8634C671.108 62.8634 665.161 63.8806 659.975 65.9151C654.858 67.9043 650.847 70.5942 647.943 73.9849ZM1122.47 92.2268L1096.38 39.6711H1094.72L1068.57 92.2268H1122.47ZM1359.28 24.9555C1363.98 27.8037 1369.62 29.2278 1376.19 29.2278C1382.76 29.2278 1388.36 27.8037 1392.99 24.9555C1397.69 22.0621 1400.04 18.6036 1400.04 14.58C1400.04 10.6016 1397.69 7.18827 1392.99 4.34009C1388.36 1.4467 1382.76 0 1376.19 0C1369.62 0 1363.98 1.4467 1359.28 4.34009C1354.65 7.18827 1352.33 10.6016 1352.33 14.58C1352.33 18.6036 1354.65 22.0621 1359.28 24.9555Z"
          fill="#D9D9D9"
          fillOpacity="0.2"
        />
      </svg>
    </footer>
  );
};

export default Footer;
